

---

# ТЗ UI-VAULT-DESKTOP-02 — Привести Vault UI к нормальному виду через единый стиль `vault.css`

## 0) Цель

Сделать Vault UI нормальным и “десктопным”: шапка + 3 колонки (Folders / Entries / Details) со вменяемыми отступами и карточками. Использовать существующий стиль:

* `src/styles/screens/vault.css`

Никакие внешние архивы/картинки не нужны.

---

## 1) Запрет/удаление мусора

### 1.1 Запрет: НЕ добавлять “старую архитектуру CSS”

НЕ добавлять файлы:

* `layout.css`, `shell.css`, `components.css`, `buttons.css`, `dialogs.css`, `toasts.css`

### 1.2 Удалить/не использовать неверные классы

В Vault-коде **не должно быть** классов (если встречаются — удалить/заменить):

* `vault-panel`
* `vault-panel-header`
* `vault-content`
* `vault-details-card`
* `vault-card-list`
* `vault-card`
* `btn-secondary` (заменить на классы, которые реально есть в `vault.css`: `btn btn-primary/btn-secondary/btn-danger` — см. существующие определения)

---

## 2) Единая раскладка Vault (три колонки)

### 2.1 Файл: `src/features/Vault/Vault.tsx`

Сделать ровно такую структуру DOM:

```tsx
<div className="vault-shell">
  <VaultHeader ... />
  <div className="vault-body">
    <aside className="vault-sidebar">...</aside>
    <section className="vault-datacards">...</section>
    <section className="vault-details">...</section>
  </div>
</div>
```

**Важно:** заменить `vault-content` на `vault-datacards`, если сейчас другое.

---

## 3) Header: привести к стилям `vault.css`

### 3.1 Файл: `src/features/Vault/components/Header/VaultHeader.tsx`

Заменить разметку на:

```tsx
<header className="vault-appbar">
  <div className="vault-profile">
    <div className="vault-title">Vault</div>
    <div className="vault-subtitle">Active profile: {profileName}</div>
  </div>

  <div className="vault-actions">
    <button className="vault-action-button" disabled aria-label="Export">...</button>
    <button className="vault-action-button" disabled aria-label="Import">...</button>
    <button className="vault-action-button" disabled aria-label="Settings">...</button>
    <button className="vault-action-button" onClick={onLock} aria-label="Lock">...</button>
  </div>
</header>
```

Тумблер “Trash mode” из хедера удалить полностью (Deleted будет пунктом слева).

---

## 4) Sidebar: системные пункты + папки + счётчики

### 4.1 Логика навигации (useVault)

Файл: `src/features/Vault/useVault.ts`

Заменить модель выбора на единый ключ:

* `selectedNav: "all" | "favorites" | "archive" | "deleted" | { folderId: string }`

Правила отображения карточек:

* `all`: только активные (`deletedAt == null`) и **не archived** (нет tag `"archived"`)
* `favorites`: активные и tag содержит `"favorite"`
* `archive`: активные и tag содержит `"archived"`
* `deleted`: показывать удалённые (`deletedCards`) и включать режим корзины
* `folderId`: активные карточки конкретной папки

Посчитать счётчики для пунктов слева:

* All items: count активных и не archived
* Favorites: count активных с `"favorite"`
* Archive: count активных с `"archived"`
* Deleted: count удалённых

### 4.2 UI списка папок

Файл: `src/features/Vault/components/Folders/Folders.tsx`

Использовать классы:

* заголовок: `vault-sidebar-title`
* список: `vault-folder-list`
* элемент: `button.vault-folder` (+ класс `active` для выбранного)
* имя: `span.folder-name`
* счётчик: `span.folder-count`

Список должен быть:

1. All items
2. Favorites
3. Archive
4. Deleted
5. далее пользовательские папки

---

## 5) Entries (центр): список карточек по стилю `vault.css`

### 5.1 Файл: `src/features/Vault/components/DataCards/DataCards.tsx`

Сделать структуру:

* header:

  * `div.datacards-header`
  * `div.vault-section-header` (текст “Entries”)
  * кнопка `Add entry` — `className="btn btn-primary"`

* список:

  * `div.vault-datacard-list`
  * элемент:

    * `button.vault-datacard` (+ `active`)

Внутри элемента:

* `div.datacard-title`
* `div.datacard-meta`

  * основной текст (username/email/url)
  * если favorite → `span.pill` (текст “Favorite”)
  * `span.muted` (Updated …)

Пустое состояние: `div.vault-empty` с текстом `Empty`.

---

## 6) Details (справа): карточка деталей по `vault.css`

### 6.1 Файл: `src/features/Vault/components/Details/Details.tsx`

Контейнер: `div.vault-detail-card`

Верхняя строка:

* `div.detail-row`

  * `div.detail-dates` (Created / Last updated)
  * `div.detail-actions`

    * `Mark favorite` → `btn btn-secondary`
    * `Edit` → `btn btn-secondary`
    * `Delete` → `btn btn-danger`

Поля:

* `div.detail-field`

  * `div.detail-label`
  * `div.detail-value-box`

    * `div.detail-value-text`
    * `div.detail-value-actions`

      * copy: `button.icon-button`
      * password eye: `button.icon-button`

### 6.2 Mark favorite (через tags)

В `useVault.ts` добавить action `toggleFavorite(cardId)`:

* добавляет/удаляет `"favorite"` в `tags`
* вызывает `update_datacard`
* refresh списка

---

## 7) Критерии приёмки

1. UI выглядит аккуратно: шапка + 3 колонки без пустой “пустыни”.
2. Работают:

* Add folder
* Add entry
* выбор папок/системных пунктов
* выбор карточки → details
* Delete / Restore / Purge (как было)
* Mark favorite (через tags)
* Lock

---


