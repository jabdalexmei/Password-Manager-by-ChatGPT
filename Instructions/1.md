

# ФИНАЛЬНОЕ ТЗ: Password Manager (Portable only)

## 0) Цели

1. Переименовать проект **NewAppTest → Password Manager**.
2. Сделать приложение **строго portable**:

   * все данные хранятся **рядом с программой**
   * **AppData не используется вообще**
3. Привести код и UI к канонической терминологии **DataCard**.
4. **Миграция не нужна**.

---

## 1) Общая концепция хранения данных (Portable)

### 1.1 Основное правило

Приложение **всегда** хранит данные в папке рядом с исполняемым файлом.

**Единственный допустимый путь хранения:**

```
<папка_программы>\Data\Profiles
```

Примеры:

```
PasswordManager\
 ├─ Password Manager.exe
 ├─ Data\
 │   └─ Profiles\
 │       └─ <profile_id>\
```

### 1.2 Запрещено

* Использовать:

  * `C:\Users\<user>\AppData\Local\...`
  * `app_data_dir`, `local_data_dir` и аналоги
* Хранить данные вне папки программы

---

## 2) Поведение приложения при старте

### 2.1 Определение путей

При запуске приложение должно:

1. Определить путь к исполняемому файлу (`app_dir`)
2. Вычислить:

   * `data_root = app_dir\Data`
   * `profiles_root = app_dir\Data\Profiles`
3. Создать эти папки, если их нет

### 2.2 Ошибка доступа

Если:

* папку `Data` или `Profiles` невозможно создать
* нет прав на запись

➡ приложение должно:

* показать понятную ошибку (диалог/экран)
* завершить работу

**Fallback’ов не существует.**

---

## 3) Переименование NewAppTest → Password Manager

### 3.1 UI

* Заголовок окна: **Password Manager**
* Все строки интерфейса:

  * ❌ NewAppTest
  * ✅ Password Manager

### 3.2 Сборка и метаданные (Tauri)

Изменить:

* `productName`: `Password Manager`
* bundle identifier: `com.passwordmanager.app` (или утверждённый вариант)
* имя исполняемого файла и артефактов сборки
* внутренние имена пакетов, где это возможно

---

## 4) Терминология и доменная модель (обязательно)

### 4.1 Запрещённая терминология

В проекте **не должно быть**:

* `Entry`, `Entries`
* `VaultEntry`
* `entry-title`, `vault-entry-list` и т.п.

### 4.2 Каноническая терминология

Использовать **только**:

* `DataCard`
* `DataCards`
* `vault-datacard`
* `vault-datacard-list`
* `datacard-title`, `datacard-meta`

Это касается:

* типов
* переменных
* файлов
* CSS-классов
* UI-текста

---

## 5) Backend (Tauri / Rust)

### 5.1 Единый источник пути данных

В backend должен существовать **один модуль**, который:

* получает `app_dir` (папка exe)
* формирует:

  * `data_root = app_dir/Data`
  * `profiles_root = app_dir/Data/Profiles`
* создаёт папки при старте

Другие части backend **не вычисляют пути самостоятельно**.

### 5.2 Структура профилей

Все данные профиля хранятся строго в:

```
profiles_root\<profile_id>\
```

### 5.3 Без миграции

Backend:

* не ищет старые данные
* не читает AppData
* не копирует ничего автоматически

---

## 6) Frontend (Vault / UI)

### 6.1 Архитектура Vault

Рекомендуемая структура:

```
src/features/Vault/
 ├─ Vault.tsx        // UI + layout
 ├─ useVault.ts      // состояние и логика
 ├─ types.ts         // DataCard, Folder
 ├─ storage.ts       // mock / адаптер
```

### 6.2 Vault UI (целевой вид)

Vault состоит из 3 колонок:

#### Левая колонка (Sidebar)

* Search
* Add data card
* Add folder
* Список папок:

  * All items
  * Favorites
  * Archive
  * Deleted
  * пользовательские
* Счётчики
* Активная папка визуально выделена

#### Центральная колонка (Cards)

* Список **DataCards**
* Активная карточка подсвечена
* Метаданные:

  * username / email
  * favorite badge
  * last updated

#### Правая колонка (Details)

* Created / Last updated
* Поля:

  * Title
  * URL
  * Username
  * Email
  * Mobile phone
  * Password (show / hide)
  * Notes
* Кнопки copy
* UI-действия (пока без backend): Edit / Delete / Favorite

---

## 7) Acceptance Criteria

1. После запуска рядом с `.exe` создаётся:

   ```
   Data\Profiles
   ```
2. Все данные профиля лежат в:

   ```
   Data\Profiles\<profile_id>
   ```
3. Папка AppData **не используется вообще**
4. В проекте **нет** `Entry / Entries`
5. В UI, окне и сборке отображается **Password Manager**
6. При отсутствии прав на запись приложение показывает ошибку и не продолжает работу

---

## 8) Явно не делаем

* ❌ Installed-режим
* ❌ Выбор папки данных
* ❌ Миграцию
* ❌ Fallback в AppData
* ❌ Cloud / Sync

---

