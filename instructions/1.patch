
## Patch (unified diff)

```diff
*** a/src/features/Vault/components/BankCards/useBankCardsViewModel.ts
--- b/src/features/Vault/components/BankCards/useBankCardsViewModel.ts
***************
*** 1,60 ****
  import { useCallback, useState } from 'react';
  import { useTranslation } from '../../../../shared/lib/i18n';
  import { BankCardItem, BankCardSummary, CreateBankCardInput, UpdateBankCardInput } from '../../types/ui';
@@
  type UseBankCardsParams = {
    cards: BankCardSummary[];
    defaultFolderId: string | null;
    selectedCardId: string | null;
    isTrashMode: boolean;
    onSelectCard: (id: string | null) => void;
+   onToggleFavorite: (id: string) => Promise<void> | void;
+   onToggleArchive: (id: string) => Promise<void> | void;
    onCreateCard: (input: CreateBankCardInput) => Promise<BankCardItem | void | null>;
    onUpdateCard: (input: UpdateBankCardInput) => Promise<void>;
    onDeleteCard: (id: string) => Promise<void> | void;
    onRestoreCard: (id: string) => Promise<void> | void;
    onPurgeCard: (id: string) => Promise<void> | void;
    onRestoreAllTrash?: () => Promise<void> | void;
    onPurgeAllTrash?: () => Promise<void> | void;
  };
@@
  export type BankCardsViewModel = {
    cards: BankCardSummary[];
    selectedCardId: string | null;
    isTrashMode: boolean;
    selectCard: (id: string) => void;
+   toggleFavorite: (id: string) => Promise<void> | void;
+   toggleArchive: (id: string) => Promise<void> | void;
    deleteCard: (id: string) => void;
    restoreCard: (id: string) => void;
    purgeCard: (id: string) => void;
    restoreAllTrash: () => Promise<void>;
    purgeAllTrash: () => Promise<void>;
    isTrashBulkSubmitting: boolean;
    openCreateModal: () => void;
    closeCreateModal: () => void;
    openEditModal: (card: BankCardItem) => void;
    closeEditModal: () => void;
    isCreateOpen: boolean;
    isEditOpen: boolean;
    createForm: BankCardFormState;
    editForm: BankCardFormState | null;
    createErrors: BankCardFieldErrors;
    editErrors: BankCardFieldErrors;
    isCreateSubmitting: boolean;
    isEditSubmitting: boolean;
    updateCreateField: (field: keyof BankCardFormState, value: string) => void;
    updateEditField: (field: keyof BankCardFormState, value: string) => void;
    submitCreate: () => Promise<void>;
    submitEdit: () => Promise<void>;
  };
@@
  export function useBankCardsViewModel({
    cards,
    defaultFolderId,
    selectedCardId,
    isTrashMode,
    onSelectCard,
+   onToggleFavorite,
+   onToggleArchive,
    onCreateCard,
    onUpdateCard,
    onDeleteCard,
    onRestoreCard,
    onPurgeCard,
    onRestoreAllTrash,
    onPurgeAllTrash,
  }: UseBankCardsParams): BankCardsViewModel {
@@
    const selectCard = useCallback(
      (id: string) => {
        onSelectCard(id);
      },
      [onSelectCard]
    );
+
+   const toggleFavorite = useCallback(
+     async (id: string) => {
+       await onToggleFavorite(id);
+     },
+     [onToggleFavorite]
+   );
+
+   const toggleArchive = useCallback(
+     async (id: string) => {
+       await onToggleArchive(id);
+     },
+     [onToggleArchive]
+   );
@@
    return {
      cards,
      selectedCardId,
      isTrashMode,
      selectCard,
+     toggleFavorite,
+     toggleArchive,
      deleteCard,
      restoreCard,
      purgeCard,
      restoreAllTrash,
      purgeAllTrash,
      isTrashBulkSubmitting,
      openCreateModal,
      closeCreateModal,
      openEditModal,
      closeEditModal,
      isCreateOpen,
      isEditOpen,
      createForm,
      editForm,
      createErrors,
      editErrors,
      isCreateSubmitting,
      isEditSubmitting,
      updateCreateField,
      updateEditField,
      submitCreate,
      submitEdit,
    };
  }
*** a/src/features/Vault/Vault.tsx
--- b/src/features/Vault/Vault.tsx
***************
*** 70,120 ****
    const bankCardsViewModel = useBankCardsViewModel({
      cards: bankCards.visibleCards,
      defaultFolderId: typeof bankCards.selectedNav === 'object' ? bankCards.selectedNav.folderId : null,
      selectedCardId: bankCards.selectedCardId,
      isTrashMode: bankCards.isTrashMode,
      onSelectCard: (id) => {
        bankCards.selectCard(id);
        vault.selectCard(null);
        setActiveDetailsKind('bank');
      },
+     onToggleFavorite: bankCards.toggleFavorite,
+     onToggleArchive: bankCards.toggleArchive,
      onCreateCard: bankCards.createCard,
      onUpdateCard: bankCards.updateCard,
      onDeleteCard: bankCards.deleteCard,
      onRestoreCard: bankCards.restoreCard,
      onPurgeCard: bankCards.purgeCard,
      onRestoreAllTrash: bankCards.restoreAllTrash,
      onPurgeAllTrash: bankCards.purgeAllTrash,
    });
*** a/src/features/Vault/components/BankCards/BankCards.tsx
--- b/src/features/Vault/components/BankCards/BankCards.tsx
***************
*** 1,20 ****
  import React, { useEffect, useMemo, useRef, useState } from 'react';
  import { useTranslation } from '../../../../shared/lib/i18n';
  import { BankCardFieldErrors, BankCardFormState, BankCardsViewModel } from './useBankCardsViewModel';
  import type { Folder } from '../../types/ui';
  import { FolderSelect } from '../shared/FolderSelect';
  import { VaultSortControl } from '../shared/VaultSortControl';
  import {
    getVaultSortMode,
    setVaultSortMode,
    sortBankCardSummaries,
    type VaultSortMode,
  } from '../../lib/vaultSort';
  import { IconMoreHorizontal } from '@/shared/icons/lucide/icons';
@@
  export function BankCards({
@@
  }: BankCardsProps) {
@@
    const cards = useMemo(() => sortBankCardSummaries(rawCards, sortMode), [rawCards, sortMode]);
    const [isTrashActionsOpen, setIsTrashActionsOpen] = useState(false);
+   const [cardMenu, setCardMenu] = useState<null | { id: string; x: number; y: number }>(null);
    const shouldShowTrashActions = isTrashMode && showTrashActions;
@@
    return (
      <div className={`vault-panel-wrapper ${fillHeight ? 'vault-panel-wrapper--fill' : ''}`.trim()}>
+       {cardMenu && !viewModel.isTrashMode && (
+         <>
+           <div
+             className="vault-actionmenu-backdrop"
+             onClick={() => setCardMenu(null)}
+             onContextMenu={(e) => {
+               e.preventDefault();
+               setCardMenu(null);
+             }}
+           />
+           <div
+             className="vault-actionmenu-panel vault-contextmenu-panel"
+             role="menu"
+             style={
+               {
+                 '--menu-x': `${cardMenu.x}px`,
+                 '--menu-y': `${cardMenu.y}px`,
+               } as React.CSSProperties
+             }
+           >
+             {(() => {
+               const target = cards.find((c) => c.id === cardMenu.id) ?? null;
+               const isArchived = Boolean(target?.archivedAt);
+               const isFavorite = Boolean(target?.isFavorite);
+
+               return (
+                 <>
+                   <button
+                     className="vault-actionmenu-item"
+                     type="button"
+                     onClick={async () => {
+                       const id = cardMenu.id;
+                       setCardMenu(null);
+                       try {
+                         const backend = await import('../../api/vaultApi').then((m) => m.getBankCard(id));
+                         const mapped = await import('../../types/mappers').then((m) => m.mapBankCardFromBackend(backend));
+                         viewModel.openEditModal(mapped);
+                       } catch (err) {
+                         console.error(err);
+                       }
+                     }}
+                   >
+                     {t('action.edit')}
+                   </button>
+
+                   <button
+                     className="vault-actionmenu-item"
+                     type="button"
+                     onClick={async () => {
+                       const id = cardMenu.id;
+                       setCardMenu(null);
+                       await viewModel.toggleFavorite(id);
+                     }}
+                   >
+                     {isFavorite ? t('action.unmarkFavorite') : t('action.markFavorite')}
+                   </button>
+
+                   <button
+                     className="vault-actionmenu-item"
+                     type="button"
+                     onClick={async () => {
+                       const id = cardMenu.id;
+                       setCardMenu(null);
+                       await viewModel.toggleArchive(id);
+                     }}
+                   >
+                     {isArchived ? t('action.unarchive') : t('action.archive')}
+                   </button>
+
+                   <button
+                     className="vault-actionmenu-item vault-actionmenu-danger"
+                     type="button"
+                     onClick={async () => {
+                       const id = cardMenu.id;
+                       setCardMenu(null);
+                       await viewModel.deleteCard(id);
+                     }}
+                   >
+                     {t('action.delete')}
+                   </button>
+                 </>
+               );
+             })()}
+           </div>
+         </>
+       )}
        <div className="datacards-header">
          <div className="vault-section-header">{sectionTitle}</div>
@@
        {cards.length === 0 ? (
@@
        ) : (
          <div className="vault-datacard-list">
            {cards.map((card) => {
              const isActive = selectedCardId === card.id;
              const isFavorite = card.isFavorite;
              const title = card.title?.trim() ? card.title : t('label.untitled');
 
              return (
                <button
                  key={card.id}
                  className={`vault-datacard ${isActive ? 'active' : ''}`}
                  type="button"
                  onClick={() => viewModel.selectCard(card.id)}
+                 onContextMenu={(e) => {
+                   e.preventDefault();
+                   viewModel.selectCard(card.id);
+                   setCardMenu({ id: card.id, x: e.clientX, y: e.clientY });
+                 }}
                >
                  <div className="datacard-top">
                    <div className="datacard-title">{title}</div>
                    {isFavorite && <span className="pill datacard-favorite">{t('label.favorite')}</span>}
                  </div>
                </button>
              );
            })}
          </div>
        )}
@@
      </div>
    );
  }
*** a/src/i18n/locales/en/BankCards.json
--- b/src/i18n/locales/en/BankCards.json
***************
*** 1,60 ****
  {
@@
    "action.delete": "Delete",
    "action.edit": "Edit",
    "action.markFavorite": "Mark favorite",
    "action.unmarkFavorite": "Unmark favorite",
+   "action.archive": "Archive",
+   "action.unarchive": "Unarchive",
    "action.create": "Create",
    "action.save": "Save",
@@
    "label.folderRoot": "No folder"
  }
```

---

