# UI-POLISH-VAULT-02 — Canon modal UI for “Create data card” and “Create folder” + consistent dialog layout

## Goal

Bring the Vault modals to a clean, consistent, “canonical” look (matching the rest of the app theme), specifically:

* **Create data card** modal layout/spacing/field styling
* **Create folder** modal layout/spacing/validation styling
* consistent dialog header/body/footer structure
* keyboard accessibility and focus-visible styling
* **no backend changes**, **no logic changes** beyond UI-only validation and small UX details (disable button, error message)

## Scope

Frontend only:

* `src/features/Vault/components/modals/CreateDataCardModal.tsx`
* `src/features/Vault/components/modals/CreateFolderModal.tsx`
* `src/styles/screens/vault.css`
* `src/styles/ui.css` (only if shared dialog primitives are missing)

## Non-goals

* Implement bank card editor or custom fields editor
* Add new screens or new flows
* Change API payload format (must remain exactly as current working backend expects)

---

## 1) Canon dialog layout primitives (single structure for all Vault modals)

### 1.1 Required dialog DOM structure

Both modals must use the same structure:

```tsx
<div className="dialog-backdrop">
  <div className="dialog" role="dialog" aria-modal="true" aria-labelledby="dialog-title">
    <div className="dialog-header">
      <h2 id="dialog-title" className="dialog-title">{/* title */}</h2>
    </div>

    <div className="dialog-body">
      {/* form fields */}
    </div>

    <div className="dialog-footer">
      <button className="btn btn-secondary" type="button">{/* Cancel */}</button>
      <button className="btn btn-primary" type="submit">{/* Create */}</button>
    </div>
  </div>
</div>
```

### 1.2 Styling requirements for dialog primitives

If any of these classes are missing or inconsistent, add/adjust them.

#### File: `src/styles/ui.css`

Add (or align existing rules to match these requirements):

```css
.dialog {
  width: min(520px, calc(100vw - 32px));
  border-radius: var(--radius-lg);
  background: var(--color-surface-1);
  border: 1px solid var(--color-border);
  box-shadow: var(--shadow-lg);
}

.dialog-header {
  padding: 16px 18px;
  border-bottom: 1px solid var(--color-border);
}

.dialog-title {
  font-size: 16px;
  line-height: 20px;
  margin: 0;
}

.dialog-body {
  padding: 16px 18px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.dialog-footer {
  padding: 14px 18px;
  border-top: 1px solid var(--color-border);
  display: flex;
  justify-content: flex-end;
  gap: 10px;
}
```

**Acceptance:** Both modals render with identical header/body/footer spacing and border lines.

---

## 2) Create folder modal — canonical minimal form

### File

`src/features/Vault/components/modals/CreateFolderModal.tsx`

### 2.1 Title and fields

* Dialog title text: **“Create folder”**
* Single input:

  * label: **“Name”**
  * placeholder: **“Folder name”**

### 2.2 Validation (UI-only)

* On submit:

  * `name.trim()` must be non-empty
* If empty:

  * show inline error under input: **“Folder name is required”**
  * do not close modal
* Disable “Create” button while submit is in progress.

### 2.3 Layout classes (must be used)

Fields must use common form classes:

```tsx
<div className="form-field">
  <label className="form-label" htmlFor="folder-name">Name</label>
  <input id="folder-name" className="input" ... />
  {error && <div className="form-error">{error}</div>}
</div>
```

### 2.4 Focus behavior

* When modal opens, focus goes to the Name input.

### Acceptance (Create folder)

* Modal looks clean and consistent with app theme.
* Empty submit shows inline error and keeps modal open.
* Create/Cancel buttons align right in footer.

---

## 3) Create data card modal — canonical “simple creation” form

### File

`src/features/Vault/components/modals/CreateDataCardModal.tsx`

### 3.1 Title and buttons

* Dialog title: **“Create data card”**
* Footer buttons:

  * Cancel: `btn btn-secondary`
  * Create: `btn btn-primary`
* Create button text: **“Create”**

### 3.2 Fields (exact order, minimal set)

Use **single-column** layout with consistent spacing:

1. **Title** (required)
2. URL
3. Username
4. Email
5. Password
6. Mobile phone
7. Note (textarea)
8. Tags (single input, comma separated)

**Explicitly DO NOT include**:

* bank_card fields
* custom_fields editor UI

### 3.3 Validation

* Title required: `title.trim()` must be non-empty
* If empty:

  * inline error under Title: **“Title is required”**
  * do not close modal
* Disable Create while submitting.

### 3.4 Input sizing + classes

All fields must use:

* `form-field`, `form-label`, `input`, `textarea`, `form-error`

Example field block:

```tsx
<div className="form-field">
  <label className="form-label" htmlFor="dc-title">Title</label>
  <input id="dc-title" className="input" value={title} onChange={...} />
  {titleError && <div className="form-error">{titleError}</div>}
</div>
```

### 3.5 Password field (UX)

* Use input type `"password"` by default.
* Add a small “Show/Hide” toggle as an **icon button** (optional but recommended):

  * must not change layout height
  * must use `icon-button` styles and `aria-label`

### 3.6 Tags parsing (UI-side only)

* User types: `tag1, tag2, tag3`
* Convert to array:

  * split by comma
  * trim spaces
  * remove empty strings
  * optionally dedupe case-insensitively
* Keep payload format exactly as backend expects.

### Acceptance (Create data card)

* Modal matches canonical dialog layout (header/body/footer).
* Required title validation works.
* Form spacing and input widths are consistent.
* No bank/custom fields UI added.

---

## 4) Add shared form styles (inputs, labels, errors)

### File

`src/styles/ui.css` (preferred) or `src/styles/screens/vault.css` (if you keep Vault-only)

Add or ensure these exist:

```css
.form-field {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.form-label {
  font-size: 12px;
  line-height: 16px;
  color: var(--color-text-muted);
}

.input,
.textarea {
  width: 100%;
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
  background: var(--color-input-bg);
  color: var(--color-text);
  padding: 10px 12px;
}

.textarea {
  min-height: 84px;
  resize: vertical;
}

.input:focus-visible,
.textarea:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
  border-color: transparent;
}

.form-error {
  font-size: 12px;
  line-height: 16px;
  color: var(--color-danger);
}
```

---

## 5) Accessibility requirements

* Dialog container: `role="dialog" aria-modal="true"`
* Title: `aria-labelledby="dialog-title"` and element id `dialog-title`
* Escape key closes modal (keep current behavior if already implemented)
* Focus-visible outlines must be visible for keyboard users

---

#
