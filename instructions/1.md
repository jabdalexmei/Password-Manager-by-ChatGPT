

## TECHNICAL SPEC (EN): Fix broken imports after moving hooks into `features/*/hooks`

### Scope

Fix Vite “Failed to resolve import” errors caused by incorrect relative import paths after introducing `hooks/` folders.

### Root cause

Hook files moved deeper by 1 directory level (`.../Feature/hooks/*.ts`). Relative imports that previously used `../../shared/...` must become `../../../shared/...` (one extra `..`). Vite fails module resolution if the relative path is incorrect. ([Vitest][1])

Additionally, Vault hook files import `./api/vaultApi` and `./types/*` but `api/` and `types/` are located at `src/features/Vault/api` and `src/features/Vault/types`, i.e. **siblings** of `hooks/`, so imports must use `../api/...` and `../types/...`.

---

# 1) Fix `shared/lib/tauri` imports in feature hooks

### File: `src/features/LogIn/hooks/useLogIn.ts`

**Before**

```ts
import { loginVault } from '../../shared/lib/tauri';
```

**After**

```ts
import { loginVault } from '../../../shared/lib/tauri';
```

### File: `src/features/ProfileCreate/hooks/useProfileCreate.ts`

**Before**

```ts
import { createProfile, ProfileMeta } from '../../shared/lib/tauri';
```

**After**

```ts
import { createProfile, ProfileMeta } from '../../../shared/lib/tauri';
```

### File: `src/features/Startup/hooks/useStartup.ts`

**Before**

```ts
import { deleteProfile, listProfiles, ProfileMeta } from '../../shared/lib/tauri';
```

**After**

```ts
import { deleteProfile, listProfiles, ProfileMeta } from '../../../shared/lib/tauri';
```

### File: `src/features/Workspace/hooks/useWorkspace.ts`

**Before**

```ts
import { WorkspaceItem, workspaceList, workspaceRemove } from '../../shared/lib/tauri';
```

**After**

```ts
import { WorkspaceItem, workspaceList, workspaceRemove } from '../../../shared/lib/tauri';
```

---

# 2) Fix Vault hooks: `api/`, `types/`, and `shared/*` imports

## 2.1 File: `src/features/Vault/hooks/useVault.ts`

### 2.1.1 Fix API import

**Before**

```ts
} from './api/vaultApi';
```

**After**

```ts
} from '../api/vaultApi';
```

### 2.1.2 Fix shared imports (hooks folder is deeper)

**Before**

```ts
import { clipboardClearAll, lockVault } from '../../shared/lib/tauri';
import { useToaster } from '../../shared/components/Toaster';
import { useTranslation } from '../../shared/lib/i18n';
```

**After**

```ts
import { clipboardClearAll, lockVault } from '../../../shared/lib/tauri';
import { useToaster } from '../../../shared/components/Toaster';
import { useTranslation } from '../../../shared/lib/i18n';
```

### 2.1.3 Fix types imports (`types/` is sibling of `hooks/`)

**Before**

```ts
} from './types/mappers';
import { CreateDataCardInput, DataCard, DataCardSummary, Folder, UpdateDataCardInput } from './types/ui';
import { BackendUserSettings } from './types/backend';
import { sortCards, sortFolders } from './types/sort';
```

**After**

```ts
} from '../types/mappers';
import { CreateDataCardInput, DataCard, DataCardSummary, Folder, UpdateDataCardInput } from '../types/ui';
import { BackendUserSettings } from '../types/backend';
import { sortCards, sortFolders } from '../types/sort';
```

✅ `import { useDebouncedValue } from './useDebouncedValue';` — оставить как есть (он в той же папке `hooks/`).

---

## 2.2 File: `src/features/Vault/hooks/useBankCards.ts`

### 2.2.1 Fix API import

**Before**

```ts
} from './api/vaultApi';
```

**After**

```ts
} from '../api/vaultApi';
```

### 2.2.2 Fix shared imports

**Before**

```ts
import { useTranslation } from '../../shared/lib/i18n';
import { useToaster } from '../../shared/components/Toaster';
```

**After**

```ts
import { useTranslation } from '../../../shared/lib/i18n';
import { useToaster } from '../../../shared/components/Toaster';
```

### 2.2.3 Fix types imports

**Before**

```ts
} from './types/mappers';
import { BankCardItem, BankCardSummary, CreateBankCardInput, UpdateBankCardInput } from './types/ui';
import { sortCards } from './types/sort';
import { BackendUserSettings } from './types/backend';
```

**After**

```ts
} from '../types/mappers';
import { BankCardItem, BankCardSummary, CreateBankCardInput, UpdateBankCardInput } from '../types/ui';
import { sortCards } from '../types/sort';
import { BackendUserSettings } from '../types/backend';
```

✅ `import { SelectedNav } from './useVault';` — оставить как есть (оба файла в `hooks/`).

---

# 3) Verification steps (must pass)

1. Run:

```bash
npm run dev
```

2. Confirm no Vite errors:

* `Failed to resolve import "../../shared/lib/tauri"...`
* `Failed to resolve import "./api/vaultApi"...`

3. Optional: to prevent future mistakes, you can switch these deep relative imports to alias imports using `@/` (your project already has alias in `vite.config.ts`). Vite’s docs recommend using proper alias configuration for cleaner paths. ([vitejs][2])

