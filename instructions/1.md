

## TS (diff-style)

### 1) `src/shared/styles/ui.css`

**Purpose:** add an extra-small compact button size for tight UIs (filters), without affecting existing `.btn-compact` usages.

```diff
--- before: src/shared/styles/ui.css
+++ after:  src/shared/styles/ui.css
@@
 /* Compact button (used for small inline actions like "Open" in Details) */
 .btn-compact {
   padding: 8px 12px;
   min-height: 34px;
 }
 
+/* Extra-compact button (used for dense tool panels like Vault filters) */
+.btn-compact-xs {
+  padding: 6px 10px;
+  min-height: 28px; /* keep >= 24px target size (WCAG 2.5.8) */
+  font-size: 12.5px;
+  line-height: 1.1;
+}
+
 /* Disabled buttons: dimmed + no pointer/transform */
 .btn:disabled {
   opacity: 0.6;
   cursor: not-allowed;
   transform: none;
 }
```

Почему так: WCAG 2.5.8 рекомендует минимум 24×24 CSS px для targets — 28px даёт запас. ([W3C][1])

---

### 2) `src/features/Vault/components/Search/Search.tsx`

**Purpose:** enforce stable filter order and use XS button size for filter toggles.

```diff
--- before: src/features/Vault/components/Search/Search.tsx
+++ after:  src/features/Vault/components/Search/Search.tsx
@@
 import React, { useEffect, useMemo, useRef, useState } from 'react';
 import { useTranslation } from '../../../../shared/lib/i18n';
 import { IconFilters } from '../../../../shared/icons/lucide/icons';
 import { VaultSearchFilterKey, VaultSearchFilters } from '../../types/searchFilters';
@@
 export function Search({ query, onChange, filters, onChangeFilters, filterKeys }: Props) {
   const { t } = useTranslation('Vault');
   const [open, setOpen] = useState(false);
   const rootRef = useRef<HTMLDivElement | null>(null);
 
+  const orderedFilterKeys = useMemo<VaultSearchFilterKey[]>(() => {
+    const priority: Record<VaultSearchFilterKey, number> = {
+      has2fa: 0,
+      hasAttachments: 1,
+      hasSeedPhrase: 2,
+      hasPhone: 3,
+      hasNotes: 4,
+    };
+    return [...filterKeys].sort((a, b) => (priority[a] ?? 999) - (priority[b] ?? 999));
+  }, [filterKeys]);
+
   const labelByKey = useMemo<Record<VaultSearchFilterKey, string>>(
     () => ({
       has2fa: t('filters.has2fa'),
       hasAttachments: t('filters.hasAttachments'),
       hasSeedPhrase: t('filters.hasSeedPhrase'),
       hasPhone: t('filters.hasPhone'),
       hasNotes: t('filters.hasNotes'),
     }),
     [t]
   );
@@
       {open && (
         <div className="vault-filter-popover" role="dialog" aria-label={t('filters.title')}>
           <div className="vault-filter-popover-title">{t('filters.title')}</div>
           <div className="vault-filter-popover-grid">
-            {filterKeys.map((key) => {
+            {orderedFilterKeys.map((key) => {
               const active = filters[key];
               return (
                 <button
                   key={key}
                   type="button"
-                  className={`btn btn-compact vault-filter-toggle ${active ? 'btn-primary' : 'btn-secondary'}`}
+                  className={`btn btn-compact-xs vault-filter-toggle ${active ? 'btn-primary' : 'btn-secondary'}`}
                   aria-pressed={active}
                   onClick={() => toggle(key)}
                 >
                   {labelByKey[key]}
                 </button>
               );
             })}
           </div>
         </div>
       )}
```

Почему именно так:

* Порядок теперь гарантированно правильный, даже если где-то потом случайно передадут keys в другом порядке.
* `aria-pressed` остаётся правильным для toggle-кнопок по WAI-ARIA/APG. ([W3C][2])

---

### 3) `src/shared/styles/screens/vault.css`

**Purpose:** make the XS buttons full-width and aligned nicely in the column.

```diff
--- before: src/shared/styles/screens/vault.css
+++ after:  src/shared/styles/screens/vault.css
@@
-.vault-filter-toggle.btn-compact {
+.vault-filter-toggle.btn-compact-xs {
   border-radius: var(--radius-sm);
   width: 100%;
   justify-content: flex-start;
-
-  /* Make filter toggles denser without affecting other .btn-compact usages */
-  padding: 6px 10px;
-  min-height: 30px;
-  font-size: 13px;
-  line-height: 1.1;
 }
```

