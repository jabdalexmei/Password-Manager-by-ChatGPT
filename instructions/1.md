**Fix spec (EN)**

- **Goal:** Ensure password-protected vault changes are persisted reliably, not only on manual lock/close.
    
- **Files:**
    
    - `src-tauri/src/services/security_service.rs`
        
    - `src-tauri/src/services/datacards_service.rs`
        
    - `src-tauri/src/services/folders_service.rs`
        
    - `src-tauri/src/services/attachments_service.rs`
        
    - `src-tauri/src/services/password_history_service.rs`
        
    - plus any other service that mutates the DB via `repo_impl::*`
        
- **Required change:**
    
    1. Introduce a persistence policy for protected vault:
        
        - Option A (simple & robust): call `persist_active_vault(state)` after every successful **mutating** operation (create/update/delete/restore/purge) when the active profile is protected.
            
        - Option B (better UX): add a debounced “autosave” (e.g. persist no more than once per N seconds) triggered by mutating commands; still force persist on `lock_vault`.
            
    2. Ensure persistence is serialized (single-flight) to avoid concurrent serialize/encrypt/write.
        
- **Acceptance criteria:**
    
    - After any mutating command, killing the app process and restarting does **not** lose the last committed changes.
        
    - No deadlocks around `vault_keeper_conn` / `vault_key` mutexes.
