

## Technical Specification (EN): Centralize ALL theme tokens in `blueTheme.css` and remove color literals from other stylesheets

### Objective

Move all theme-related values (colors, alpha overlays, gradients, shadows, “on-color” text colors) into `src/styles/themes/blueTheme.css`.
After implementation, no other CSS file in `src/styles/**` (excluding `themes/blueTheme.css`) must contain **hex colors** (`#...`) or **color functions** (`rgb/rgba/hsl/hsla`).

### Scope

Frontend only:

* `src/styles/themes/blueTheme.css` (single source of truth for theme values)
* `src/styles/base.css`, `src/styles/ui.css`
* `src/styles/screens/*.css`

### Non-goals

* Do not change component structure or class names.
* Do not visually change the current look; replace literals with equivalent tokens.

---

## 1) Add missing theme tokens to `blueTheme.css`

### File

`src/styles/themes/blueTheme.css`

### Change

Inside `:root { ... }`, append the following tokens (keep existing tokens untouched):

```css
  /* Common "on" colors */
  --color-on-primary: #fff;

  /* App background gradient (used by body) */
  --bg-app: linear-gradient(
    135deg,
    var(--color-bg) 0%,
    var(--color-surface-2) 60%,
    var(--color-surface-2) 100%
  );

  /* Screen background gradients */
  --bg-startup-screen: radial-gradient(circle at 20% 20%, rgba(37, 99, 235, 0.12), transparent 35%),
    radial-gradient(circle at 80% 10%, rgba(37, 99, 235, 0.08), transparent 30%),
    linear-gradient(135deg, rgba(37, 99, 235, 0.06), rgba(37, 99, 235, 0.02));

  --bg-profile-create-screen: radial-gradient(circle at 20% 20%, rgba(37, 99, 235, 0.10), transparent 35%),
    radial-gradient(circle at 80% 10%, rgba(37, 99, 235, 0.06), transparent 30%),
    linear-gradient(135deg, rgba(37, 99, 235, 0.04), rgba(37, 99, 235, 0.02));

  --bg-login-screen: radial-gradient(circle at 10% 0%, rgba(37, 99, 235, 0.10), transparent 35%),
    radial-gradient(circle at 90% 0%, rgba(37, 99, 235, 0.05), transparent 30%),
    linear-gradient(135deg, rgba(37, 99, 235, 0.04), rgba(15, 23, 42, 0.9));

  /* Overlays / translucent surfaces */
  --overlay-dialog-backdrop: rgba(0, 0, 0, 0.45);
  --surface-tint-02: rgba(255, 255, 255, 0.02);
  --surface-tint-08: rgba(255, 255, 255, 0.08);

  /* Semantic translucent backgrounds */
  --primary-soft-bg: rgba(37, 99, 235, 0.08);
  --success-soft-bg: rgba(34, 197, 94, 0.12);
  --danger-soft-bg: rgba(239, 68, 68, 0.12);

  /* Vault hover borders (keep exact existing look) */
  --focus-border: rgba(59, 130, 246, 0.45);
  --focus-border-strong: rgba(59, 130, 246, 0.55);

  /* Danger subtle styles (keep exact existing look) */
  --danger-border-weak: rgba(239, 68, 68, 0.4);
  --danger-hover-bg: rgba(239, 68, 68, 0.08);

  /* Shadows */
  --shadow-lg: var(--shadow-card);
  --shadow-popover: 0 12px 30px rgba(0, 0, 0, 0.45);
```

Notes:

* `--shadow-lg` is currently used in `ui.css` but is missing from the theme; this fixes that mismatch.
* Exact RGBA values are preserved to avoid visual changes.

---

## 2) Remove color literals from `base.css`

### File

`src/styles/base.css`

### Replace

Current `body` background block:

```css
body {
  background: linear-gradient(
    135deg,
    #0b1222 0%,
    #0f172a 60%,
    #0f172a 100%
  );
  color: var(--color-text);
}
```

### With

```css
body {
  background: var(--bg-app);
  color: var(--color-text);
}
```

---

## 3) Remove color literals from screen backgrounds

### File

`src/styles/screens/startup.css`

### Replace

```css
background: radial-gradient(circle at 20% 20%, rgba(37, 99, 235, 0.12), transparent 35%),
  radial-gradient(circle at 80% 10%, rgba(37, 99, 235, 0.08), transparent 30%),
  linear-gradient(135deg, rgba(37, 99, 235, 0.06), rgba(37, 99, 235, 0.02));
```

### With

```css
background: var(--bg-startup-screen);
```

---

### File

`src/styles/screens/profile-create.css`

### Replace

```css
background: radial-gradient(circle at 20% 20%, rgba(37, 99, 235, 0.10), transparent 35%),
  radial-gradient(circle at 80% 10%, rgba(37, 99, 235, 0.06), transparent 30%),
  linear-gradient(135deg, rgba(37, 99, 235, 0.04), rgba(37, 99, 235, 0.02));
```

### With

```css
background: var(--bg-profile-create-screen);
```

---

### File

`src/styles/screens/login.css`

### Replace

```css
background: radial-gradient(circle at 10% 0%, rgba(37, 99, 235, 0.10), transparent 35%),
  radial-gradient(circle at 90% 0%, rgba(37, 99, 235, 0.05), transparent 30%),
  linear-gradient(135deg, rgba(37, 99, 235, 0.04), rgba(15, 23, 42, 0.9));
```

### With

```css
background: var(--bg-login-screen);
```

---

## 4) Remove color literals from `ui.css`

### File

`src/styles/ui.css`

### Replace these exact literals

1. `.badge`

```css
background: rgba(37, 99, 235, 0.08);
```

→

```css
background: var(--primary-soft-bg);
```

2. `.empty-state`

```css
background: rgba(255, 255, 255, 0.02);
```

→

```css
background: var(--surface-tint-02);
```

3. `.btn-primary`

```css
color: #fff;
```

→

```css
color: var(--color-on-primary);
```

4. `.btn-danger`

```css
color: #fff;
```

→

```css
color: var(--color-on-primary);
```

5. `.dialog-backdrop`

```css
background: rgba(0, 0, 0, 0.45);
```

→

```css
background: var(--overlay-dialog-backdrop);
```

6. `.generator-strength-bar`

```css
background: rgba(255, 255, 255, 0.08);
```

→

```css
background: var(--surface-tint-08);
```

7. `.toast-success`

```css
background: rgba(34, 197, 94, 0.12);
```

→

```css
background: var(--success-soft-bg);
```

8. `.toast-error`

```css
background: rgba(239, 68, 68, 0.12);
```

→

```css
background: var(--danger-soft-bg);
```

9. `.primary.primary-danger`

```css
color: #fff;
```

→

```css
color: var(--color-on-primary);
```

---

## 5) Remove color literals from `vault.css`

### File

`src/styles/screens/vault.css`

### Replace

1. `.vault-folder:hover`

```css
border-color: rgba(59, 130, 246, 0.45);
```

→

```css
border-color: var(--focus-border);
```

2. `.vault-datacard:hover`

```css
border-color: rgba(59, 130, 246, 0.45);
```

→

```css
border-color: var(--focus-border);
```

3. `.datacards-menu`

```css
box-shadow: 0 12px 30px rgba(0, 0, 0, 0.45);
```

→

```css
box-shadow: var(--shadow-popover);
```

4. `.icon-button-primary`

```css
color: #fff;
```

→

```css
color: var(--color-on-primary);
```

5. `.icon-button:hover`

```css
border-color: rgba(59, 130, 246, 0.55);
```

→

```css
border-color: var(--focus-border-strong);
```

6. `.icon-button-danger`

```css
border-color: rgba(239, 68, 68, 0.4);
```

→

```css
border-color: var(--danger-border-weak);
```

7. `.icon-button-danger:hover`

```css
background: rgba(239, 68, 68, 0.08);
```

→

```css
background: var(--danger-hover-bg);
```

---

## 6) Add a guardrail: automated check that no theme literals leak outside `blueTheme.css`

### New file

`scripts/check-theme-colors.mjs`

Add:

```js
import fs from "node:fs";
import path from "node:path";

const stylesRoot = path.resolve("src/styles");
const themeFile = path.resolve("src/styles/themes/blueTheme.css");

const COLOR_RE = /#[0-9a-fA-F]{3,8}\b|rgba?\([^)]*\)|hsla?\([^)]*\)/;

function walk(dir) {
  const out = [];
  for (const entry of fs.readdirSync(dir, { withFileTypes: true })) {
    const full = path.join(dir, entry.name);
    if (entry.isDirectory()) out.push(...walk(full));
    else if (entry.isFile() && entry.name.endsWith(".css")) out.push(full);
  }
  return out;
}

const files = walk(stylesRoot).filter((f) => path.resolve(f) !== themeFile);

const violations = [];
for (const file of files) {
  const text = fs.readFileSync(file, "utf8");
  const lines = text.split(/\r?\n/);
  for (let i = 0; i < lines.length; i++) {
    if (COLOR_RE.test(lines[i])) {
      violations.push(`${path.relative(process.cwd(), file)}:${i + 1}: ${lines[i].trim()}`);
    }
  }
}

if (violations.length) {
  console.error("Theme color literals found outside blueTheme.css:\n");
  console.error(violations.join("\n"));
  process.exit(1);
}

console.log("OK: No theme color literals outside blueTheme.css");
```

### File

`package.json`

Add script:

```json
"theme:check": "node scripts/check-theme-colors.mjs"
```

---

## Acceptance Criteria

1. `npm run theme:check` passes.
2. Manual grep check: searching in `src/styles/**/*.css` finds `#...` or `rgba(` **only** inside `src/styles/themes/blueTheme.css`.
3. UI looks the same as before the refactor (no color/contrast regressions):

   * Login background, Startup/ProfileCreate backgrounds match current.
   * Buttons, dialogs, toasts, vault hover borders match current.

---

