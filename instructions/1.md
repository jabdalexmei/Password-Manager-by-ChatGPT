## Stage 2 steps (diff-like)

## 1) Create `src/app/` and move entry files

```bash
mkdir -p src/app
git mv src/App.tsx src/app/App.tsx
git mv src/main.tsx src/app/main.tsx
```

Update imports in the new `src/app/main.tsx`:

* If it imports `./App`, update to `./App` still (same folder now)
* If other files import `App.tsx` via old paths, update them.

---

## 2) Move “shared stuff” into `src/shared/`

### 2.1 Move components

```bash
mkdir -p src/shared/components
git mv src/components/ConfirmDialog.tsx src/shared/components/ConfirmDialog.tsx
git mv src/components/Toaster.tsx src/shared/components/Toaster.tsx
```

### 2.2 Move UI primitives

```bash
mkdir -p src/shared/ui
git mv src/components/ui/dialog.tsx src/shared/ui/dialog.tsx
```

### 2.3 Move icons

```bash
mkdir -p src/shared/icons/lucide
git mv src/components/lucide/icons.ts src/shared/icons/lucide/icons.ts
git mv src/components/lucide/index.ts src/shared/icons/lucide/index.ts
```

### 2.4 Move lib

```bash
mkdir -p src/shared/lib
git mv src/lib/i18n.ts src/shared/lib/i18n.ts
git mv src/lib/tauri.ts src/shared/lib/tauri.ts
```

### 2.5 Move styles

```bash
mkdir -p src/shared/styles
git mv src/styles src/shared/styles
```

> After moving styles folder, verify import paths in your CSS entry points (Vite) and update any `import './styles/...';` occurrences.

---

## 3) i18n restructure into `src/i18n/locales/{en,ru}/...`

### 3.1 Create new locale dirs

```bash
mkdir -p src/i18n/locales/en
mkdir -p src/i18n/locales/ru
```

### 3.2 Move existing English files

Your current English files are under `src/i18n/English/*.json`. Move them to:

```bash
git mv src/i18n/English/*.json src/i18n/locales/en/
```

### 3.3 Update i18n loader (`src/shared/lib/i18n.ts`)

Update imports to point to `src/i18n/locales/en/*.json`.

Also ensure you keep namespaces as separate dictionaries (this matches i18next’s namespace model). ([i18next][6])

---

## 4) Update import paths across app

This is mechanical. Use grep-based checklist:

### 4.1 Replace old component imports

* `from '@/components/ui/dialog'` → `from '@/shared/ui/dialog'` (or relative)
* `from '@/components/ConfirmDialog'` → `from '@/shared/components/ConfirmDialog'`
* `from '@/components/Toaster'` → `from '@/shared/components/Toaster'`
* `from '@/components/lucide/...` → `from '@/shared/icons/lucide/...`
* `from '@/lib/i18n'` → `from '@/shared/lib/i18n'`

If you have tsconfig path aliases (`@/`), update them to match new folder layout.

---

## 5) Windows Git case-sensitivity note (important)

If you do any file renames that only change casing, Git may ignore them on Windows. Prefer:

* `git mv File.tsx file_tmp.tsx` then `git mv file_tmp.tsx file.tsx` ([Git][4])

---

## Stage 2 verification

```bash
npm run build
npm run dev
```

---

# Final “Definition of Done”

1. Stage 1 branch compiles and runs; ConfirmDialog uses shared dialog primitive.
2. Stage 2 branch compiles and runs; folder structure matches target tree.
3. “Where are hooks?” becomes obvious:

   * feature-level hooks: `features/<Feature>/hooks/`
   * component-local hooks: `features/<Feature>/components/<Area>/hooks/`

