3) create_profile может паниковать + нет атомарности записи профиля (HIGH)

Где:

src-tauri/src/data/profiles/registry.rs строка 90–91:

fs::write(config_path, serde_json::to_string_pretty(&config).unwrap())


unwrap() → потенциальная паника.

Там же: сначала пишется registry (save_registry), потом создаётся profile_dir, потом config.json. Если шаги после save_registry упадут — в реестре останется “битая” запись профиля.

Fix spec (EN)

Files: src-tauri/src/data/profiles/registry.rs

Required change:

Replace unwrap() with proper error handling mapped to PROFILE_STORAGE_WRITE (or a more specific code).

Make profile creation atomic:

Create profile_dir first (and any required subdirs),

Write config.json using “write temp + rename” (atomic replace),

Only after that append to registry and persist registry (also via temp+rename).

If any step fails, rollback (delete created dir / temp files).

Acceptance criteria:

No panics on malformed JSON serialization or disk errors.

No registry entries exist without corresponding on-disk profile directory/config.
