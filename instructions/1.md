

### TS (EN): Fix translation lookup to support nested dictionaries + preserve flat dot-keys

**File:** `src/lib/i18n.ts`

**Goal:**
Make `t(key)` work for both:

* flat keys like `"label.profileId"` stored as a single property name
* nested JSON objects like `{ "twoFactor": { "text": { "hint": "..." }}}` accessed via `"twoFactor.text.hint"`

**Implementation details:**

1. Add a helper resolver that:

* first checks `dict[key]` directly (to preserve existing flat dot-keys)
* if not found and `key` contains `.`, traverses nested objects by splitting on `.`
* returns only string values (otherwise treat as missing â†’ return the original key)

**Exact code to add (place near dictionaries / above `useTranslation`):**

```ts
const hasOwn = (obj: object, prop: string) => Object.prototype.hasOwnProperty.call(obj, prop);

const resolveI18nValue = (dict: unknown, key: string): unknown => {
  if (!dict || typeof dict !== 'object') return undefined;

  const record = dict as Record<string, unknown>;

  // 1) Preserve existing flat keys (including those with dots)
  if (hasOwn(record, key)) return record[key];

  // 2) Try deep lookup only if key looks like a path
  if (!key.includes('.')) return undefined;

  let current: unknown = record;
  for (const part of key.split('.')) {
    if (!current || typeof current !== 'object') return undefined;
    const curRec = current as Record<string, unknown>;
    if (!hasOwn(curRec, part)) return undefined;
    current = curRec[part];
  }

  return current;
};
```

2. Update `t` inside `useTranslation`:

**Replace:**

```ts
if (!dict || !(key in dict)) return key;
// eslint-disable-next-line @typescript-eslint/no-explicit-any
let result = (dict as any)[key] as string;
```

**With:**

```ts
const value = resolveI18nValue(dict, key);
if (typeof value !== 'string') return key;

let result = value;
```

3. Update `tGlobal` the same way:

**Replace:**

```ts
const dict = dictionaries[namespace];
if (!(key in dict)) return key;
// eslint-disable-next-line @typescript-eslint/no-explicit-any
let result = (dict as any)[key] as string;
```

**With:**

```ts
const dict = dictionaries[namespace];
const value = resolveI18nValue(dict, key);
if (typeof value !== 'string') return key;

let result = value;
```

**Acceptance criteria:**

* UI no longer shows raw keys for 2FA strings:

  * `twoFactor.pill`, `twoFactor.addAction`, `twoFactor.text.hint`, `twoFactor.qr.loading`, `twoFactor.error.INVALID_URI`, etc.
* Existing flat keys containing dots (e.g. `"label.profileId"`) still work.
