
# SPEC — VAULT-UI-POLISH-03

## Active profile (name + id) / Sidebar layout / Section titles / “Information” panel / Remove “Delete folder” button / Password Generator icon + strength gradient

### Goal

Polish the Vault UI to a clean, predictable “canon” behavior:

1. Vault header must show **Active profile: {name} [{id}]**.
2. Sidebar actions **Add data card** and **Add folder** must be placed **under the Search field**.
3. Search placeholder must be **"Search"** (not “Search vault”).
4. The **center panel title** must always reflect what the user selected in the left navigation (**All items / Favorites / Archive / Deleted / {FolderName}**).
5. The **right panel title** must be **"Information"**.
6. Remove **Delete folder** button from UI completely. Folder rename/delete must be accessible **only via right-click context menu**.
7. Password Generator: replace the old icon with the provided SVG, and make the strength bar color change **smoothly from red → green** based on strength.

---

## 1) Vault header: show Active profile name + id

### Files

* `src/features/Vault/Vault.tsx` (or wherever the Vault header is rendered)
* `src/i18n/*` (strings)

### Requirement

Render exactly:
**Active profile: {profileName} [{profileId}]**

Example:
`Active profile: 1 [b3c1a9c2-....]`

### Implementation

* Ensure Vault UI has access to both `activeProfile.name` and `activeProfile.id`.
* If UI currently only has the name, extend the profile state/store to include id from the same source that provides the active profile.
* Text must be rendered via i18n only.

### i18n

Add/update key:

* `vault.active_profile`: `Active profile: {{name}} [{{id}}]`

---

## 2) Sidebar layout: actions under Search + placeholder “Search”

### Files

* `src/features/Vault/Vault.tsx` or `src/features/Vault/components/Sidebar/*`
* CSS: `src/styles/screens/vault.css` or the Vault stylesheet used by the project

### Requirement

Left sidebar order must be:

1. Search input
2. Buttons group: **Add data card** + **Add folder** (directly under Search)
3. Navigation and folders list below

### Changes

* Move `.vault-sidebar-actions` block **below** the Search input.
* Search placeholder must be **"Search"** (i18n).

### i18n

* `vault.search.placeholder`: `Search`

---

## 3) Center panel title must match selected navigation/folder

### Files

* `src/features/Vault/Vault.tsx`
* `src/features/Vault/useVault.ts` (or wherever selection state is stored)
* `src/features/Vault/components/DataCards/DataCards.tsx` (if it renders the title)

### Requirement

The center panel title must show:

* If a nav item is selected:

  * All items → `All items`
  * Favorites → `Favorites`
  * Archive → `Archive`
  * Deleted → `Deleted`
* If a folder is selected:

  * Title must be the folder name (e.g., `Work`)

### Implementation

* Introduce a single computed value in the Vault state:

  * `currentSectionTitle: string`
* Logic:

  * If `selectedFolderId != null` → use the selected folder’s `name`
  * Else use nav label based on `selectedNav`
* Render this title in one place only and remove any hardcoded “Data cards” title when the title is meant to reflect the current section.

### i18n

* `vault.nav.all_items`: `All items`
* `vault.nav.favorites`: `Favorites`
* `vault.nav.archive`: `Archive`
* `vault.nav.deleted`: `Deleted`

---

## 4) Right panel title must be “Information”

### Files

* `src/features/Vault/components/Details/Details.tsx` (or the right-side panel component)
* or `src/features/Vault/Vault.tsx`

### Requirement

Right panel title must be exactly:
**Information** (i18n only)

### i18n

* `vault.information.title`: `Information`

---

## 5) Remove “Delete folder” button from UI entirely (context menu only)

### Files

* `src/features/Vault/components/Folders/Folders.tsx`
* `src/features/Vault/components/Folders/FolderRow.tsx` (if used)
* Any styles related to the removed button

### Requirement

* There must be **no visible** “Delete folder” button anywhere.
* Folder management actions must be available only via **right-click context menu** on a folder row.
* The context menu must contain at minimum:

  * Rename
  * Delete (permanent delete behavior is handled in a separate spec; here only UI removal is required)

### Acceptance for this section

* Global search must confirm no UI button remains: `"Delete folder"`.

---

## 6) Password Generator: replace icon + strength bar gradient

### 6.1 Replace generator icon with provided SVG

#### Files

* Create new icon component:

  * `src/components/icons/GenerateIcon.tsx`
* Update generator trigger button in:

  * `src/features/Vault/components/modals/CreateDataCardModal.tsx` and/or `src/features/Vault/components/modals/PasswordGeneratorModal.tsx`
  * Wherever the “generate” icon/button is currently rendered

#### Requirement

* Replace the old icon (star/asterisk or text button) with the provided SVG icon component.
* The icon must inherit color via `currentColor`.

#### Code (MUST USE AS IS)

Create file: `src/components/icons/GenerateIcon.tsx`
(Use exactly the code below — no changes.)

```tsx
import * as React from "react";

export function GenerateIcon(props: React.SVGProps<SVGSVGElement>) {
  return (
    <svg
      viewBox="0 0 381 421"
      xmlns="http://www.w3.org/2000/svg"
      aria-hidden="true"
      focusable="false"
      {...props}
    >
      <path
        d="M0 0 C15.7816195 11.602376 15.7816195 11.602376 20.91015625 18.83984375 C21.32265625 17.78796875 21.73515625 16.73609375 22.16015625 15.65234375 C24.1776033 11.0075238 26.40153371 7.81206717 30.72265625 5.02734375 C35.92728058 3.08836606 39.97773335 3.19685106 45.03515625 5.40234375 C49.22846226 7.35979988 51.94151796 10.72901652 53.91015625 14.83984375 C54.63759817 18.98757549 54.61147284 23.0705649 54.57421875 27.2734375 C54.57900238 28.46534195 54.58378601 29.6572464 54.5887146 30.88526917 C54.59210836 33.39919356 54.58294294 35.91316241 54.56201172 38.42700195 C54.53526615 42.26158771 54.56176923 46.0932398 54.59375 49.92773438 C54.59044535 52.37630851 54.58403799 54.82488083 54.57421875 57.2734375 C54.5843399 58.4132457 54.59446106 59.55305389 54.60488892 60.72740173 C54.50393845 67.63180064 53.7536346 72.68706632 48.91015625 77.83984375 C42.91946787 82.69349745 37.12120979 82.42498691 29.625 82.37109375 C28.45054825 82.37492065 27.2760965 82.37874756 26.0660553 82.38269043 C23.59082173 82.38540476 21.11555925 82.37807733 18.64038086 82.36132812 C14.85660809 82.33989446 11.07473001 82.36115809 7.29101562 82.38671875 C4.88150624 82.38407577 2.47199803 82.3789514 0.0625 82.37109375 C-1.06575699 82.37919067 -2.19401398 82.3872876 -3.35646057 82.39562988 C-11.28669144 82.30112847 -14.52502844 81.01927362 -20.40234375 75.77734375 C-23.78839817 71.88965164 -23.42546579 67.47473352 -23.3671875 62.56640625 C-22.84435088 57.42640682 -20.34114548 54.87442907 -16.49609375 51.6953125 C-12.16221112 49.33453928 -9.04382169 49.37704133 -4.21484375 49.58984375 C-3.43109375 49.60789062 -2.64734375 49.6259375 -1.83984375 49.64453125 C0.07735814 49.69129227 1.9939234 49.76302372 3.91015625 49.83984375 C-10.71055879 29.79687677 -32.25116436 14.53048454 -57.17626953 10.50268555 C-83.68412869 7.22084422 -109.36616495 11.63115461 -131.08984375 27.83984375 C-134.55476686 30.71194815 -137.83630791 33.73215607 -141.08984375 36.83984375 C-141.693125 37.36835938 -142.29640625 37.896875 -142.91796875 38.44140625 C-152.04022616 46.75374361 -158.31554017 58.41601486 -163.31420898 69.56030273 C-165.60616038 74.50112299 -168.21715077 77.40349726 -173.08984375 79.83984375 C-178.43112608 80.45989311 -183.48085415 80.79408306 -188.08984375 77.71484375 C-191.70876599 74.59927281 -193.79313691 71.51499087 -194.33203125 66.65625 C-194.52282399 60.03150219 -193.14973459 55.38813306 -190.15234375 49.52734375 C-189.74411377 48.70339111 -189.33588379 47.87943848 -188.9152832 47.03051758 C-181.13279804 31.70029273 -169.86175619 16.3570185 -156.08984375 5.83984375 C-155.12175781 5.08574219 -154.15367187 4.33164063 -153.15625 3.5546875 C-135.19641351 -10.04906938 -115.9924552 -17.69231632 -94.08984375 -22.16015625 C-93.30037354 -22.33812744 -92.51090332 -22.51609863 -91.69750977 -22.69946289 C-60.25627503 -28.25414971 -25.74596319 -17.99939019 0 0 Z"
        fill="currentColor"
        transform="translate(265.08984375,125.16015625)"
      />
      <path
        d="M0 0 C1.09518951 -0.01929062 2.19037903 -0.03858124 3.3187561 -0.05845642 C8.34463282 -0.11617645 13.37036442 -0.16550167 18.39648438 -0.19628906 C21.04440366 -0.21784981 23.69225204 -0.25192905 26.33984375 -0.29882812 C30.15966604 -0.36588861 33.97801153 -0.39330346 37.79833984 -0.41235352 C38.97570709 -0.44018417 40.15307434 -0.46801483 41.36611938 -0.49668884 C47.99649796 -0.48017688 52.12505899 0.2154561 57.2696228 4.52745056 C61.13885951 8.89444139 61.13241197 12.96048296 61.00537109 18.58764648 C60.54281957 23.5141873 58.27692714 25.86002867 54.69677734 28.95874023 C50.42135119 32.23353473 48.00096822 32.42972354 42.63427734 32.77124023 C41.35294922 32.8550293 40.07162109 32.93881836 38.75146484 33.02514648 C37.76404297 33.08573242 36.77662109 33.14631836 35.75927734 33.20874023 C52.80051079 52.92552966 74.67581752 68.38351313 101.47167969 70.41430664 C104.3001797 70.51160026 107.11667567 70.53795813 109.94677734 70.52124023 C110.95562988 70.51560059 111.96448242 70.50996094 113.00390625 70.50415039 C140.32095983 70.06334157 164.29741486 58.54674169 183.25146484 39.08764648 C190.70593924 30.53009566 196.34943043 20.8163579 200.984375 10.48754883 C203.27532863 5.54669611 205.88714166 2.64480808 210.75927734 0.20874023 C217.23092381 -0.61028556 222.43959161 0.36607785 227.75927734 4.20874023 C230.9588225 7.56826264 232.03810014 10.29490495 232.32177734 14.83374023 C232.04368298 21.22991069 229.54887484 26.53335222 226.75927734 32.20874023 C226.32486328 33.10463867 225.89044922 34.00053711 225.44287109 34.92358398 C209.42322427 66.00443723 181.40069751 87.30671106 148.63427734 98.39624023 C115.48607685 107.94132447 80.91575152 104.45012656 50.6105957 88.17016602 C40.3415996 82.45296561 30.70073747 75.95101987 22.75927734 67.20874023 C21.80596136 66.24541568 20.84802486 65.28662862 19.88427734 64.33374023 C18.84261068 63.29207357 17.80094401 62.2504069 16.75927734 61.20874023 C16.62392578 61.78881836 16.48857422 62.36889648 16.34912109 62.96655273 C14.61909719 69.24436402 12.14953724 72.57193838 6.75927734 76.20874023 C2.7235615 78.22659816 -1.8756261 77.93723549 -6.24072266 77.20874023 C-10.81335394 74.53709049 -14.20324474 71.11655594 -16.24072266 66.20874023 C-16.50814819 63.68008423 -16.50814819 63.68008423 -16.53125 60.80102539 C-16.5440097 59.71955231 -16.55676941 58.63807922 -16.56991577 57.52383423 C-16.57214142 56.36024384 -16.57436707 55.19665344 -16.57666016 53.99780273 C-16.58331696 52.7969101 -16.58997375 51.59601746 -16.59683228 50.35873413 C-16.6069571 47.81851737 -16.61164935 45.27827403 -16.61132812 42.73803711 C-16.61569824 38.85542875 -16.65201381 34.97395975 -16.68994141 31.09155273 C-16.69581017 28.62280662 -16.69977916 26.15405511 -16.70166016 23.68530273 C-16.71603119 22.5257608 -16.73040222 21.36621887 -16.74520874 20.17153931 C-16.70958633 13.87418558 -16.53238152 9.96165674 -12.24072266 5.20874023 C-7.9724434 1.44858946 -5.63880737 0.09265094 0 0 Z"
        fill="currentColor"
        transform="translate(79.24072265625,254.791259765625)"
      />
    </svg>
  );
}
```

#### Usage example

```tsx
import { GenerateIcon } from "@/components/icons/GenerateIcon";

<button
  type="button"
  className="icon-button"
  aria-label="Open password generator"
  onClick={openPasswordGenerator}
>
  <GenerateIcon width={20} height={20} />
</button>
```

---

### 6.2 Strength bar: smooth color from red → green

#### Files

* `src/features/Vault/components/modals/PasswordGeneratorModal.tsx`
* CSS: Vault styles where the strength bar is defined

#### Requirement

The strength bar fill color must change smoothly:

* weak password → **red**
* strong password → **green**
* intermediate values → smooth gradient transition

#### Algorithm (fixed, no alternatives)

1. Assume `bits` number already exists (example: “Strong (103 bits)”).
2. Define:

   * `maxBits = 128`
   * `t = clamp(bits / maxBits, 0, 1)`
3. Map `t` to hue:

   * `hue = 120 * t`
     (0 = red, 120 = green)
4. Use:

   * `color = hsl(hue, 80%, 45%)`

#### Implementation details

* Apply the color to the strength bar fill element inline:

  * `style={{ backgroundColor: `hsl(${hue}, 80%, 45%)` }}`

* `clamp` must be implemented locally (no external libs):

```ts
function clamp(v: number, min: number, max: number) {
  return Math.max(min, Math.min(max, v));
}
```

---

=
