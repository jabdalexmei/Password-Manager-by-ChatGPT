

## Technical Specification (TS): Reorder fields in “Create data card” (and keep custom fields after Password)

### 1. Scope

Change the visual and keyboard tab order of fields in the **Create data card** dialog.

**New required order:**

1. Title
2. URL
3. Email
4. Username
5. Mobile phone
6. Password
7. Custom fields (dynamic) *(must appear after Password)*
8. Note
9. Folder
10. Tags

This change must apply to:

* **Create dialog** (`datacard-create-dialog`)
* (Recommended for consistency) **Edit dialog** (`datacard-edit-dialog`) since both dialogs share the same renderer.

Reasoning: default focus order is based on document/source order; the UI should match that order for accessibility and predictability. ([MDN Web Docs][1])

### 2. Files to change

#### 2.1 Reorder JSX blocks in the dialog renderer

**File:**
`src/features/Vault/components/DataCards/DataCards.tsx`

**Function:**
`renderDialog(...)`

**Current field render order inside `<form className="dialog-body">`:**

* title
* url
* username
* email
* password
* mobile
* customFields map
* note
* folder
* tags

**Required change:**
Reorder the blocks to exactly:

* title
* url
* email
* username
* mobile
* password
* customFields map
* note
* folder
* tags

**Implementation details (exactly what to move):**

1. **Swap Email and Username blocks**

   * Move the entire `<div className="form-field">` block with `htmlFor={`${dialogId}-email`}` **above** the block with `htmlFor={`${dialogId}-username`}`.

2. **Move Mobile phone block above Password**

   * Move the entire `<div className="form-field">` block with `htmlFor={`${dialogId}-mobile`}` **above** the block with `htmlFor={`${dialogId}-password`}`.

3. **Ensure custom fields render immediately after Password**

   * Move the whole block:

   ```tsx
   {form.customFields.map((row) => ( ... ))}
   ```

   so it is placed **right after** the Password field block and **before** the Note block.

**Important constraints:**

* Do not change `id` attributes:

  * `${dialogId}-title`, `${dialogId}-url`, `${dialogId}-email`, `${dialogId}-username`, `${dialogId}-mobile`, `${dialogId}-password`
* Do not change form state keys:

  * `form.title`, `form.url`, `form.email`, `form.username`, `form.mobilePhone`, `form.password`
* Do not change handlers:

  * `onFieldChange('email'...)`, `onFieldChange('username'...)`, `onFieldChange('mobilePhone'...)`, etc.
* Custom fields logic must remain intact (create vs edit path):

  * `viewModel.updateCreateCustomFieldValue(...)`
  * `viewModel.updateEditCustomFieldValue(...)`

### 3. Acceptance criteria

1. **Create data card** dialog displays fields exactly in the order:

   * Title → URL → Email → Username → Mobile phone → Password → (Custom fields…) → Note → Folder → Tags

2. Custom fields added via the action menu (`customFields.add`) appear **below Password** and **above Note**.

3. Pressing **Tab** in the Create dialog follows the same order as above (no manual `tabindex` changes; rely on DOM order). ([MDN Web Docs][1])

4. No changes to the saved payload structure: creating a card and editing a card must still send the same fields as before (only the UI order changes).

### 4. Manual test plan

1. Open **Create data card** modal.
2. Verify the visual order matches the required list.
3. Use keyboard:

   * Click Title, then press Tab repeatedly — focus should move Title → URL → Email → Username → Mobile → Password → Note → Folder → Tags.
4. Add a custom field:

   * Use action menu → “Add field”
   * After confirming, the new field input must appear **immediately after Password**.
5. Save card; reopen Edit dialog and confirm order is consistent (if you keep shared renderer).

--
