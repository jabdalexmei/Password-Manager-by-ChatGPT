## Technical Specification (EN): Centralize UI icons via `lucide-react` with semantic exports and remove all hand-written SVGs

### Context / Decisions (confirmed)

* Base project: the provided “rollback” version (the one you indicated as base).
* Replace **only UI icons in React** (`src/**/*.tsx`, `src/**/*.ts`).
* Remove **all hand-written `<svg>`** from the codebase; icons must be rendered **only via `lucide-react`**.
* Icons must be imported from a single central module via semantic names:

  * `import { IconPreview } from "@/components/lucide/icons";`
* Two icon size groups are required and must be controlled by CSS (no `size={...}` props):

  * In-content icons (cards/details/inputs): 18px
  * Header/action bar icons: 20px
* Semantics are global everywhere:

  * Eye = preview/view
  * Download = export/download
  * Trash = delete

---

## 1) Dependencies

### 1.1 Add lucide-react

**File:** `package.json`
**Change:** add dependency:

```json
"lucide-react": "^0.562.0"
```

**Acceptance:** `npm install` succeeds.

---

## 2) Create centralized icon modules (2 files)

### 2.1 Semantic icon exports

**New file:** `src/components/lucide/icons.ts`

**Content:**

```ts
// Centralized semantic icon mapping.
// Only this file should import directly from "lucide-react".
export {
  Eye as IconPreview,
  EyeOff as IconPreviewOff,

  Download as IconDownload,
  Upload as IconImport,

  Trash2 as IconDelete,

  Settings as IconSettings,
  Lock as IconLock,

  Copy as IconCopy,

  Paperclip as IconAttachment,

  RefreshCw as IconRegenerate,
} from "lucide-react";
```

Notes:

* `IconPreviewOff` is used for “hide password” / “disable preview” states.
* If you later decide “generator” should use a different icon (e.g., `Wand2`), change it only here.

### 2.2 Optional index re-export (clean imports)

**New file:** `src/components/lucide/index.ts`

**Content:**

```ts
export * from "./icons";
```

**Acceptance:**

* All React code imports icons from `@/components/lucide/icons` (or `@/components/lucide` if you choose to use index; default is icons.ts as requested).

---

## 3) Remove all existing custom SVG icon sources

### 3.1 Delete icon component files (hand-written SVG)

Delete these files (if present in this base version):

* `src/components/icons/EyeIcons.tsx`
* `src/components/icons/GenerateIcon.tsx`
* `src/features/Vault/icons/CopyIcon.tsx`
* `src/features/Vault/icons/PaperclipIcon.tsx`

**Acceptance:** no TS/TSX imports reference these paths.

---

## 4) Replace all icon usages in React with semantic lucide icons

### Global rule

* Remove any inline `<svg>...</svg>` blocks from TSX.
* Replace them with semantic icon components from `@/components/lucide/icons`.
* Do not pass `size` prop. CSS controls size based on button container class.

---

## 5) Ensure CSS enforces two icon size groups

### File

`src/styles/screens/vault.css`

### Requirement

Ensure the following selectors exist (add if missing), and keep values:

```css
/* In-content icon buttons (cards, details, inputs, attachment rows) */
.icon-button svg {
  width: 18px;
  height: 18px;
}

/* Header/action bar buttons (export/import/settings/lock) */
.vault-action-button svg {
  width: 20px;
  height: 20px;
}
```

**Acceptance:**

* Icons inside `.icon-button` render at 18x18.
* Icons inside `.vault-action-button` render at 20x20.
* No `size={...}` is used anywhere.

---

## 6) File-by-file replacement list

### 6.1 Replace Eye icons (preview / show-hide)

**Target file(s):**

* `src/features/Vault/components/DataCards/DataCards.tsx`
* `src/features/Vault/components/Details/Details.tsx` (if show/hide is used there)

**Change:**

1. Remove imports from `src/components/icons/EyeIcons`.
2. Add:

```ts
import { IconPreview, IconPreviewOff } from "@/components/lucide/icons";
```

3. Replace usages:

* `<EyeIcon />` → `<IconPreview />`
* `<EyeOffIcon />` → `<IconPreviewOff />`

---

### 6.2 Replace Copy icon

**Target file(s):** wherever `CopyIcon` is used (typically):

* `src/features/Vault/components/Details/Details.tsx`
* `src/features/Vault/components/modals/PasswordGeneratorModal.tsx`

**Change:**

1. Remove import from `src/features/Vault/icons/CopyIcon`.
2. Add:

```ts
import { IconCopy } from "@/components/lucide/icons";
```

3. Replace `<CopyIcon />` → `<IconCopy />`

---

### 6.3 Replace Paperclip icon (attachments)

**Target file(s):**

* `src/features/Vault/components/DataCards/DataCards.tsx`
* `src/features/Vault/components/Details/Details.tsx`

**Change:**

1. Remove import from `src/features/Vault/icons/PaperclipIcon`.
2. Add:

```ts
import { IconAttachment } from "@/components/lucide/icons";
```

3. Replace `<PaperclipIcon />` → `<IconAttachment />`

---

### 6.4 Replace Generator/Regenerate icon

**Target file(s):**

* `src/features/Vault/components/DataCards/DataCards.tsx`
* `src/features/Vault/components/modals/PasswordGeneratorModal.tsx`

**Change:**

1. Remove import from `src/components/icons/GenerateIcon`.
2. Add:

```ts
import { IconRegenerate } from "@/components/lucide/icons";
```

3. Replace `<GenerateIcon />` → `<IconRegenerate />`

---

### 6.5 Replace Attachment actions in Information panel (Eye / Download / Trash)

**Target file:**

* `src/features/Vault/components/Details/Details.tsx`

**Change:**

1. Remove inline SVG components defined in this file (e.g., `DownloadIcon`, `TrashIcon`, and any `const ... = () => <svg ...>`).
2. Add:

```ts
import { IconPreview, IconDownload, IconDelete } from "@/components/lucide/icons";
```

3. Replace:

* Preview (eye) button icon → `<IconPreview />`
* Download/export button icon → `<IconDownload />`
* Delete button icon → `<IconDelete />`

**Semantics requirement:** these icons must represent these actions everywhere in the UI.

---

### 6.6 Replace Header action bar icons (Export / Import / Settings / Lock)

**Target file:**

* `src/features/Vault/components/Header/VaultHeader.tsx`

**Change:**

1. Remove all inline `<svg>` blocks used inside header buttons.
2. Add:

```ts
import { IconDownload, IconImport, IconSettings, IconLock } from "@/components/lucide/icons";
```

3. Replace:

* Export icon → `<IconDownload />`
* Import icon → `<IconImport />`
* Settings icon → `<IconSettings />`
* Lock icon → `<IconLock />`

---

## 7) Add an automated guardrail: forbid inline `<svg>` in React source

### New file

`scripts/check-no-inline-svg.mjs`

**Content:**

```js
import fs from "node:fs";
import path from "node:path";

const SRC_ROOT = path.resolve("src");
const RE = /<svg\b/;

function walk(dir) {
  const out = [];
  for (const entry of fs.readdirSync(dir, { withFileTypes: true })) {
    const full = path.join(dir, entry.name);
    if (entry.isDirectory()) out.push(...walk(full));
    else if (entry.isFile() && (entry.name.endsWith(".tsx") || entry.name.endsWith(".ts")))
      out.push(full);
  }
  return out;
}

const files = walk(SRC_ROOT);

const violations = [];
for (const file of files) {
  const text = fs.readFileSync(file, "utf8");
  if (RE.test(text)) violations.push(path.relative(process.cwd(), file));
}

if (violations.length) {
  console.error("Inline <svg> found in source files (must use lucide-react icons only):\n");
  console.error(violations.join("\n"));
  process.exit(1);
}

console.log("OK: No inline <svg> in src/");
```

### File

`package.json`

Add script:

```json
"icons:check": "node scripts/check-no-inline-svg.mjs"
```

**Acceptance:**

* `npm run icons:check` passes.
* Introducing any inline `<svg>` in `src/` fails the check.

---

## 8) Final Acceptance Criteria

1. App compiles and runs (`npm run dev` and/or `npm run tauri dev`).
2. `npm run icons:check` passes.
3. No hand-written `<svg>` remains in React source code.
4. All icons are imported from `@/components/lucide/icons`.
5. Two size groups are applied via CSS:

   * `.icon-button svg` = 18px
   * `.vault-action-button svg` = 20px
6. Icon semantics are consistent across the app:

   * Eye = preview
   * Download = export/download
   * Trash = delete
