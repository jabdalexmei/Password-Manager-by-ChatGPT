Файл `src-tauri/src/data/sqlite/migrations.rs` — это **встроенный “мигратор” схемы SQLite** (не “миграции как отдельные файлы”, а код, который **один раз** приводит локальную БД к нужной структуре).

Что конкретно он делает (по твоему `migrations.rs`):

1. **Включает foreign keys**

* Делает `PRAGMA foreign_keys = ON;`, чтобы работали `ON DELETE CASCADE` и т.п.

2. **Смотрит версию схемы БД**

* Читает `PRAGMA user_version;` — это обычное поле SQLite, где хранится номер схемы.

3. **Если БД пустая/новая (version = 0)**

* Применяет базовую схему из `include_str!("schema.sql")`
* Ставит `PRAGMA user_version = 4;`

4. **Если БД старая — прогоняет точечные апдейты**
   Сейчас `CURRENT_SCHEMA_VERSION = 4`, и описаны шаги:

* **v1 → v2**

  * `ALTER TABLE datacards ADD COLUMN is_favorite INTEGER NOT NULL DEFAULT 0;`
  * Затем проходит по `datacards.tags_json`, вынимает тег `"favorite"`, переносит его в `is_favorite`, а из `tags_json` удаляет, и обновляет строки.
  * Ставит `user_version = 2`.

* **v2 → v3**

  * Создаёт таблицу `attachments` + индексы (`idx_attachments_datacard`, `idx_attachments_deleted`)
  * Ставит `user_version = 3`.

* **v3 → v4**

  * Создаёт таблицу `datacard_password_history` + индекс по `datacard_id`
  * Ставит `user_version = 4`.

---

### Почему это вообще нужно (даже в dev)

Это **не “захламление миграциями”**, а страховка, чтобы:

* новый профиль создавался с актуальной схемой,
* а если ты открыл старый `vault.db`, приложение не падало из-за отсутствующих таблиц/колонок.

Если ты принципиально хочешь “никаких миграций” в dev-режиме — тогда логика должна быть другая: **при любом несовпадении схемы удаляем/пересоздаём БД** (то есть старые профили будут намеренно “ломаться”, но ты и так сказал, что совместимость не нужна). Однако сейчас в коде выбран более аккуратный путь: *поддержать старую БД через `user_version` и несколько шагов апдейта*.

Если хочешь — следующим шагом я покажу, где именно вызывается `migrate_to_latest(conn)` в твоём проекте и какие минимальные изменения нужны, чтобы сделать “dev-mode без миграций, только fresh DB”.
